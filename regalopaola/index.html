<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Para Paola üíñ</title>

<style>
html, body {
    margin: 0;
    padding: 0;
    height: 100%;
    overflow: hidden; /* üîí elimina scroll */
    touch-action: none;
    font-family: 'Georgia', serif;
    background: linear-gradient(180deg, #f8e8e8, #fdf6f2);
}

body {
    display: flex;
    justify-content: center;
    align-items: center;
}

.card {
    width: 320px;
    height: 500px;
    background: #fff;
    border-radius: 24px;
    box-shadow: 0 25px 50px rgba(0,0,0,0.2);
    overflow: hidden;
    position: relative;
}

.header {
    text-align: center;
    padding: 20px 16px 10px;
}

.header h1 {
    margin: 0;
    font-size: 1.7rem;
    color: #c95c6a;
}

.header p {
    margin: 6px 0 0;
    font-size: 0.95rem;
    color: #777;
}

/* üîë CONTENEDOR EXACTO DE LA IMAGEN */
.reveal {
    position: relative;
    width: 100%;
    height: 280px;
    overflow: hidden;
}

.gift {
    width: 100%;
    height: 100%;
    background: url("https://cdn.grupoelcorteingles.es/SGFM/dctm/MEDIA03/202507/21/00107220342252____7__1200x1200.jpg") center/contain no-repeat;
    background-color: #fff;
}

/* CANVAS AJUSTADO 1:1 */
canvas {
    position: absolute;
    inset: 0;
}

.footer {
    text-align: center;
    padding: 12px;
    font-size: 0.9rem;
    color: #999;
}

.congrats {
    position: absolute;
    inset: 0;
    background: rgba(255, 240, 245, 0.97);
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    opacity: 0;
    transform: scale(0.9);
    transition: all 0.8s ease;
    text-align: center;
    padding: 24px;
}

.congrats.show {
    opacity: 1;
    transform: scale(1);
}

.congrats h2 {
    color: #c95c6a;
    font-size: 1.8rem;
}

.congrats p {
    font-size: 1.05rem;
    color: #555;
}

/* corazones */
.heart {
    position: absolute;
    bottom: 0;
    font-size: 1.6rem;
    animation: float 4s infinite ease-in;
    pointer-events: none;
}

@keyframes float {
    from { transform: translateY(0); opacity: 1; }
    to { transform: translateY(-520px); opacity: 0; }
}
</style>
</head>

<body>

<div class="card">
    <div class="header">
        <h1>Para Paola üíñ</h1>
        <p>Un regalo de Reyes para ti</p>
    </div>

    <div class="reveal" id="reveal">
        <div class="gift"></div>
        <canvas id="scratch"></canvas>
    </div>

    <div class="footer">
        Rasca con tu dedito ‚ú®
    </div>

    <div class="congrats" id="congrats">
        <h2>‚ú® Feliz D√≠a de Reyes ‚ú®</h2>
        <p>
            Pensado para ti,<br>
            con todo mi cari√±o üíï
        </p>
        <p>Espero que te encante ‚ù§Ô∏è</p>
    </div>
</div>

<script>
const canvas = document.getElementById("scratch");
const ctx = canvas.getContext("2d");
const reveal = document.getElementById("reveal");
const congrats = document.getElementById("congrats");

/* Ajuste exacto del canvas al tama√±o visible */
canvas.width = reveal.clientWidth;
canvas.height = reveal.clientHeight;

/* Capa de rasca */
ctx.fillStyle = "#e4bcc2";
ctx.fillRect(0, 0, canvas.width, canvas.height);
ctx.globalCompositeOperation = "destination-out";

let drawing = false;

function scratch(x, y) {
    ctx.beginPath();
    ctx.arc(x, y, 24, 0, Math.PI * 2);
    ctx.fill();
}

/* Touch optimizado para m√≥vil */
canvas.addEventListener("touchstart", () => drawing = true, {passive:false});
canvas.addEventListener("touchend", () => drawing = false);
canvas.addEventListener("touchmove", e => {
    e.preventDefault();
    if (!drawing) return;
    const rect = canvas.getBoundingClientRect();
    const t = e.touches[0];
    scratch(t.clientX - rect.left, t.clientY - rect.top);
    checkReveal();
}, {passive:false});

function checkReveal() {
    const data = ctx.getImageData(0,0,canvas.width,canvas.height).data;
    let cleared = 0;
    for (let i = 3; i < data.length; i += 4) {
        if (data[i] === 0) cleared++;
    }
    if (cleared > data.length / 5) showCongrats();
}

function showCongrats() {
    canvas.style.display = "none";
    congrats.classList.add("show");
    hearts();
}

function hearts() {
    for (let i = 0; i < 16; i++) {
        const h = document.createElement("div");
        h.className = "heart";
        h.textContent = "‚ù§Ô∏è";
        h.style.left = Math.random() * 100 + "%";
        h.style.animationDelay = Math.random() * 2 + "s";
        document.body.appendChild(h);
    }
}
</script>

</body>
</html>