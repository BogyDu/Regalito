<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Caso 1 - El Faro</title>
<link rel="stylesheet" href="estilo.css">
<style>
body { font-family: "Courier New", monospace; background:#e5e2d0; margin:20px; }
h1 { text-align:center; color:#3e3a2f; margin-bottom:20px; }

/* Layout 50/50 */
.container {
  display: flex;
  gap:20px;
}

/* Izquierda: interacciones */
.interacciones {
  width:50%;
  display:flex;
  flex-direction:column;
}

/* Derecha: pistas y notas */
.informacion {
  width:50%;
  display:flex;
  flex-direction:column;
}

/* Carpetas estilo detective */
.carpeta { background:#fdf6e3; border:2px solid #a77b4d; border-radius:6px; padding:12px; margin-bottom:10px; box-shadow:4px 4px 8px rgba(0,0,0,0.3); }
.etiqueta { font-weight:bold; font-size:1.2em; margin-bottom:8px; color:#5d4730; text-shadow:1px 1px 0 #fff; }
.contenido { padding-left:12px; font-size:0.95em; }
ul { list-style:none; padding-left:0; }
li { margin-bottom:5px; padding:5px; border-left:5px solid transparent; }
.nueva { background:#fff3cd; border-left-color:#f0ad4e; }
.secretas { color:#d9534f; font-weight:bold; border-left-color:#d9534f; }
button { cursor:pointer; padding:5px 10px; margin-top:5px; border-radius:4px; border:1px solid #3e3a2f; background:#d4c89d; font-weight:bold; }
button:hover { background:#b59f71; color:#fff; }
.estado { font-weight:bold; margin-bottom:10px; }
.estado.resuelto { color:#5cb85c; }
.estado.pendiente { color:#ff9800; }

.interaccion-boton { margin-bottom:5px; }
</style>
</head>
<body>
<h1>Caso 1 - El Faro</h1>
<button onclick="window.open('dossier.html','_blank')">Abrir Dossier</button>

<div class="container">
  <!-- IZQUIERDA: INTERACCIONES -->
  <div class="interacciones">
    <div class="carpeta">
      <div class="etiqueta">Interrogar Sospechosos</div>
      <div class="contenido" id="botones-sospechosos"></div>
    </div>
  </div>

  <!-- DERECHA: PISTAS, SECRETAS Y NOTAS -->
  <div class="informacion">
    <div class="carpeta">
      <div class="etiqueta">Estado del Caso</div>
      <div class="contenido"><span id="estado-caso" class="estado"></span></div>
    </div>

    <div class="carpeta">
      <div class="etiqueta">Pistas Descubiertas</div>
      <div class="contenido"><ul id="pistas"></ul></div>
    </div>

    <div class="carpeta">
      <div class="etiqueta">Pistas Secretas ðŸ”´</div>
      <div class="contenido"><ul id="secretas"></ul></div>
    </div>

    <div class="carpeta">
      <div class="etiqueta">Notas del Detective</div>
      <div class="contenido">
        <textarea id="notas-caso1" placeholder="Escribe tus notas aquÃ­..." rows="5" style="width:100%;"></textarea>
        <button onclick="guardarNotas()">Guardar Notas</button>
      </div>
    </div>
  </div>
</div>

<script>
// Datos del caso
window.casoActual = "caso1";

const sospechosos = ["Sofia","Mateo","Clara","Javier","Lucas"];
const respuestas = {
  "Sofia":{"Â¿QuÃ© viste la noche del crimen?":"Vi a Mateo salir del faro a las 10 pm.","Â¿Conoces a los demÃ¡s sospechosos?":"SÃ­, los he visto varias veces."},
  "Mateo":{"Â¿DÃ³nde estabas a las 10 pm?":"Estaba con Claraâ€¦ pero el diario del faro muestra que eso no coincide.","Â¿Ves a alguien sospechoso?":"No puedo decir, todos parecen normales."},
  "Clara":{"Â¿QuÃ© estabas haciendo en el faro?":"Tomando fotos de la torre.","Â¿Viste algo extraÃ±o?":"No, todo parecÃ­a tranquilo."},
  "Javier":{"Â¿CuÃ¡l era tu propÃ³sito en el faro?":"Investigar la historia del faro.","Â¿Alguien mÃ¡s estaba allÃ­?":"SÃ­, vi a Mateo y Lucas."},
  "Lucas":{"Â¿Guardabas el faro esa noche?":"SÃ­, estuve revisando cada hora.","Â¿Alguien entrÃ³ sin permiso?":"No estoy seguro, pero la puerta estaba cerrada."}
};

const pistas = ["Huella en la ventana","Llave del faro","Zapato roto"];
const pistasSecretas = ["Documento Secreto: Diario del Faro","Carta del Historiador"];

// Inicializar localStorage
if(!localStorage.getItem("pistas"+casoActual)) localStorage.setItem("pistas"+casoActual, JSON.stringify(pistas));
if(!localStorage.getItem("pistasSecretas"+casoActual)) localStorage.setItem("pistasSecretas"+casoActual, JSON.stringify([]));
if(!localStorage.getItem("interrogados"+casoActual)) localStorage.setItem("interrogados"+casoActual, JSON.stringify([]));
if(!localStorage.getItem("notas"+casoActual)) localStorage.setItem("notas"+casoActual, JSON.stringify(""));

// Crear botones de sospechosos
function crearBotonesSospechosos(){
  const cont = document.getElementById("botones-sospechosos");
  cont.innerHTML="";
  sospechosos.forEach(s=>{
    const btn = document.createElement("button");
    btn.textContent = s;
    btn.className="interaccion-boton";
    btn.onclick = ()=>interrogar(s);
    cont.appendChild(btn);
  });
}

// Interrogar sospechoso
function interrogar(nombre){
  let interrogados = JSON.parse(localStorage.getItem("interrogados"+casoActual)) || [];
  if(!interrogados.includes(nombre)) interrogados.push(nombre);
  localStorage.setItem("interrogados"+casoActual, JSON.stringify(interrogados));

  // Agregar pista secreta si hay documento secreto
  if(nombre==="Mateo"){
    let secretas = JSON.parse(localStorage.getItem("pistasSecretas"+casoActual)) || [];
    if(!secretas.includes("Documento Secreto: Diario del Faro")){
      secretas.push("Documento Secreto: Diario del Faro");
      localStorage.setItem("pistasSecretas"+casoActual, JSON.stringify(secretas));
      alert("Se ha descubierto una pista secreta!");
    }
  }
}

// Guardar notas
function guardarNotas(){
  const notas = document.getElementById("notas-caso1").value;
  localStorage.setItem("notas"+casoActual, JSON.stringify(notas));
  alert("Notas guardadas");
}

// Cargar caso
function cargarCaso(){
  // Estado del caso
  const progreso = JSON.parse(localStorage.getItem("progresoCasos")) || {};
  const estadoSpan = document.getElementById("estado-caso");
  const estado = progreso[casoActual] ? "Resuelto âœ…" : "Pendiente ðŸŸ¡";
  estadoSpan.textContent = estado;
  estadoSpan.className = progreso[casoActual] ? "estado resuelto" : "estado pendiente";

  // Pistas
  const ulPistas = document.getElementById("pistas");
  const listaPistas = JSON.parse(localStorage.getItem("pistas"+casoActual)) || [];
  ulPistas.innerHTML="";
  listaPistas.forEach(p=>{
    let li = document.createElement("li");
    li.textContent = p;
    li.className="nueva";
    ulPistas.appendChild(li);
  });

  // Pistas secretas
  const ulSecretas = document.getElementById("secretas");
  const listaSecretas = JSON.parse(localStorage.getItem("pistasSecretas"+casoActual)) || [];
  ulSecretas.innerHTML="";
  listaSecretas.forEach(s=>{
    let li = document.createElement("li");
    li.textContent = s;
    li.className="secretas";
    ulSecretas.appendChild(li);
  });

  // Notas
  document.getElementById("notas-caso1").value = JSON.parse(localStorage.getItem("notas"+casoActual)) || "";
}

crearBotonesSospechosos();
setInterval(cargarCaso,500);
cargarCaso();
</script>
</body>
</html>
