<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Dossier del Detective</title>
<link rel="stylesheet" href="estilo.css">
<style>
body { font-family: "Courier New", monospace; background:#e5e2d0; margin:20px; }
h2 { text-align:center; color:#3e3a2f; margin-bottom:20px; }
.tab-header { display:flex; gap:10px; margin-bottom:20px; }
.tab-header button { padding:8px 15px; border:2px solid #3e3a2f; background:#d4c89d; cursor:pointer; font-weight:bold; border-radius:5px; }
.tab-header button.active { background:#b59f71; color:#fff; border-color:#3e3a2f; }
.tab-content { display:none; }
.tab-content.active { display:block; }
.carpeta { background:#fdf6e3; border:2px solid #a77b4d; border-radius:6px; padding:12px; margin-bottom:10px; box-shadow:4px 4px 8px rgba(0,0,0,0.3); }
.etiqueta { font-weight:bold; font-size:1.2em; margin-bottom:8px; color:#5d4730; text-shadow:1px 1px 0 #fff; }
.contenido { padding-left:12px; font-size:0.95em; }
ul { list-style:none; padding-left:0; }
li { margin-bottom:5px; padding:5px; border-left:5px solid transparent; }
.nueva { background:#fff3cd; border-left-color:#f0ad4e; }
.secretas { color:#d9534f; font-weight:bold; border-left-color:#d9534f; }
.estado { font-weight:bold; margin-bottom:10px; }
.estado.resuelto { color:#5cb85c; }
.estado.pendiente { color:#ff9800; }
textarea { width:100%; padding:5px; }
</style>
</head>
<body>
<h2>Dossier del Detective</h2>

<div class="tab-header">
  <button data-tab="caso1" class="active">Caso 1 - El Faro</button>
  <button data-tab="caso2">Caso 2 - El Museo</button>
</div>

<div id="caso1" class="tab-content active">
  <div class="estado">Estado del Caso: <span id="estado-caso1"></span></div>
  <div class="carpeta">
    <div class="etiqueta">Pistas Descubiertas</div>
    <div class="contenido"><ul id="pistas-caso1"></ul></div>
  </div>
  <div class="carpeta">
    <div class="etiqueta">Pistas Secretas ðŸ”´</div>
    <div class="contenido"><ul id="secretas-caso1"></ul></div>
  </div>
  <div class="carpeta">
    <div class="etiqueta">Sospechosos y Registro de ConversaciÃ³n</div>
    <div class="contenido"><ul id="sospechosos-caso1"></ul></div>
  </div>
  <div class="carpeta">
    <div class="etiqueta">Notas del Detective</div>
    <div class="contenido">
      <textarea id="notas-caso1" rows="5" readonly></textarea>
    </div>
  </div>
</div>

<div id="caso2" class="tab-content">
  <div class="estado">Estado del Caso: <span id="estado-caso2"></span></div>
  <div class="carpeta">
    <div class="etiqueta">Pistas Descubiertas</div>
    <div class="contenido"><ul id="pistas-caso2"></ul></div>
  </div>
  <div class="carpeta">
    <div class="etiqueta">Pistas Secretas ðŸ”´</div>
    <div class="contenido"><ul id="secretas-caso2"></ul></div>
  </div>
  <div class="carpeta">
    <div class="etiqueta">Sospechosos y Registro de ConversaciÃ³n</div>
    <div class="contenido"><ul id="sospechosos-caso2"></ul></div>
  </div>
  <div class="carpeta">
    <div class="etiqueta">Notas del Detective</div>
    <div class="contenido">
      <textarea id="notas-caso2" rows="5" readonly></textarea>
    </div>
  </div>
</div>

<script>
// Manejo de pestaÃ±as
const tabs = document.querySelectorAll(".tab-header button");
tabs.forEach(tab=>{
  tab.addEventListener("click",()=>{
    tabs.forEach(b=>b.classList.remove("active"));
    tab.classList.add("active");
    document.querySelectorAll(".tab-content").forEach(c=>c.classList.remove("active"));
    document.getElementById(tab.dataset.tab).classList.add("active");
  });
});

// FunciÃ³n para cargar los datos de cada caso
function cargarDossier(){
  ["caso1","caso2"].forEach(caso=>{
    const progreso = JSON.parse(localStorage.getItem("progresoCasos")) || {};
    const estadoSpan = document.getElementById("estado-"+caso);
    const estado = progreso[caso] ? "Resuelto âœ…" : "Pendiente ðŸŸ¡";
    estadoSpan.textContent = estado;
    estadoSpan.className = progreso[caso] ? "estado resuelto" : "estado pendiente";

    // Pistas
    const pistas = JSON.parse(localStorage.getItem("pistas"+caso)) || [];
    const ulPistas = document.getElementById("pistas-"+caso);
    ulPistas.innerHTML="";
    pistas.forEach(p=>{
      let li = document.createElement("li");
      li.textContent = p;
      li.className="nueva";
      ulPistas.appendChild(li);
    });

    // Pistas secretas
    const secretas = JSON.parse(localStorage.getItem("pistasSecretas"+caso)) || [];
    const ulSecretas = document.getElementById("secretas-"+caso);
    ulSecretas.innerHTML="";
    secretas.forEach(s=>{
      let li = document.createElement("li");
      li.textContent = s;
      li.className="secretas";
      ulSecretas.appendChild(li);
    });

    // Sospechosos y conversaciÃ³n
    const ulSos = document.getElementById("sospechosos-"+caso);
    ulSos.innerHTML="";
    const resumen = JSON.parse(localStorage.getItem("resumenSospechosos"+caso)) || [];
    const conversacion = JSON.parse(localStorage.getItem("conversacion"+caso)) || {};
    resumen.forEach(s=>{
      let li = document.createElement("li");
      li.innerHTML = `<strong>${s}</strong>`;
      if(conversacion[s]){
        conversacion[s].forEach(c=>{
          li.innerHTML += `<br>P: ${c.pregunta}<br>R: ${c.respuesta}`;
        });
      }
      ulSos.appendChild(li);
    });

    // Notas
    const notas = JSON.parse(localStorage.getItem("notas"+caso)) || "";
    document.getElementById("notas-"+caso).value = notas;
  });
}

// ActualizaciÃ³n automÃ¡tica
setInterval(cargarDossier,500);
cargarDossier();
</script>
</body>
</html>
