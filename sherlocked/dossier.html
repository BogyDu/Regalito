<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Dossier del Detective</title>
<link rel="stylesheet" href="estilo.css">
</head>
<body>
<h2>Dossier del Detective</h2>

<div class="carpeta">
  <div class="etiqueta">Seleccionar Caso</div>
  <div class="contenido">
    <select id="select-caso"></select>
  </div>
</div>

<div class="carpeta">
  <div class="etiqueta">Pistas Descubiertas</div>
  <div class="contenido">
    <ul id="dossier-pistas"></ul>
  </div>
</div>

<div class="carpeta">
  <div class="etiqueta">Pistas Secretas</div>
  <div class="contenido">
    <ul id="dossier-secretas"></ul>
  </div>
</div>

<div class="carpeta">
  <div class="etiqueta">Sospechosos Interrogados</div>
  <div class="contenido">
    <ul id="dossier-sospechosos"></ul>
  </div>
</div>

<div class="carpeta">
  <div class="etiqueta">Notas del Detective</div>
  <div class="contenido">
    <textarea id="notas"></textarea>
    <button onclick="guardarNotas()">Guardar Notas</button>
  </div>
</div>

<script>
// Lista de casos disponibles
const casosDisponibles = ["caso1","caso2"];

// Cargar select de casos
const select = document.getElementById("select-caso");
casosDisponibles.forEach(caso=>{
  const opt = document.createElement("option");
  opt.value = caso;
  opt.textContent = caso;
  select.appendChild(opt);
});

// Actualizar visualizaciÃ³n al cambiar caso
select.addEventListener("change", cargarDossier);

function cargarDossier(){
  const caso = select.value;
  if(!caso) return;

  const pistas = JSON.parse(localStorage.getItem("pistas"+caso)) || [];
  const secretas = JSON.parse(localStorage.getItem("pistasSecretas"+caso)) || [];
  const sospechosos = JSON.parse(localStorage.getItem("interrogados"+caso)) || [];
  const notas = JSON.parse(localStorage.getItem("notas"+caso)) || "";
  const respuestas = JSON.parse(localStorage.getItem("respuestasInterrogatorio")) || {};

  // Pistas descubiertas
  const ulPistas = document.getElementById("dossier-pistas");
  ulPistas.innerHTML = "";
  pistas.forEach(p => { 
    const li = document.createElement("li"); 
    li.textContent = p; 
    ulPistas.appendChild(li);
  });

  // Pistas secretas
  const ulSecretas = document.getElementById("dossier-secretas");
  ulSecretas.innerHTML = "";
  secretas.forEach(s => {
    const li = document.createElement("li"); 
    li.textContent = s; 
    ulSecretas.appendChild(li);
  });

  // Sospechosos interrogados
  const ulSos = document.getElementById("dossier-sospechosos");
  ulSos.innerHTML = "";
  sospechosos.forEach(s => {
    const li = document.createElement("li");
    li.innerHTML = `<strong>${s}</strong>:<br>`;
    if(respuestas[s]){
      Object.keys(respuestas[s]).forEach(preg => {
        li.innerHTML += `- ${preg}: ${respuestas[s][preg]}<br>`;
      });
    } else { li.innerHTML += "No hay respuestas registradas.<br>"; }
    ulSos.appendChild(li);
  });

  // Notas
  document.getElementById("notas").value = notas;
}

function guardarNotas(){
  const caso = select.value;
  if(!caso) return alert("Selecciona un caso primero");
  const notas = document.getElementById("notas").value;
  localStorage.setItem("notas"+caso, JSON.stringify(notas));
  alert("Notas guardadas para " + caso);
}

// Inicializar con primer caso
document.addEventListener("DOMContentLoaded", ()=>{
  select.selectedIndex = 0;
  cargarDossier();
});
</script>
</body>
</html>
